<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="style.html">

<dom-module id='contestify-match'>
<style include='contestify-match-style'></style>
<template>
  <!-- match Detail Ajax -->
  <iron-ajax
    id='ajaxMatchDetail'
    method='GET'
    url="/match"
    handle-as="json"
    on-response=onMatchDetailReceived
    debounce-duration="300">
  </iron-ajax>

  <!-- user detail Ajax -->
  <iron-ajax
    id='ajaxUserDetail'
    method='GET'
    url="/user"
    handle-as="json"
    on-response=onUserDetailReceived>
  </iron-ajax>
  <div class='match-item'>
    <paper-card status='winner' class='match-result-left'>
      <paper-icon-item>
        <div class="avatar" item-icon></div>
        <paper-item-body two-line>
          <div>{{matchDetail.player1Id.name}}</div>
        </paper-item-body>
        <div class='rank'>{{matchDetail.score1}}</div>
      </paper-icon-item>
    </paper-card>
    <div id='editHolder'>
      <template is='dom-if' if='{{isAdmin}}'>
        <paper-fab mini class='fabEdit' id='winnerEdit' icon='create' on-tap='putScore'></paper-fab>
      </template>
    </div>
    <paper-card status='loser' class='match-result-right'>
      <paper-icon-item>
        <div class="avatar" item-icon></div>
        <paper-item-body two-line>
          <div>{{matchDetail.player2Id.name}}</div>
        </paper-item-body>
        <div class='rank'>{{matchDetail.score2}}</div>
      </paper-icon-item>
    </paper-card>
  </div>
</template>
<script src='main.js'></script>
</dom-module>
